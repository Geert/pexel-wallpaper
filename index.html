<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pexel Wallpaper</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000; /* Black background for when images are loading or if one fails */
        }
        #wallpaper {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Cover the whole screen, may crop a bit */
            /* Use "contain" if you prefer to see the whole image, possibly with letterboxing: */
            /* object-fit: contain; */
            display: block;
        }
    </style>
</head>
<body>
    <img id="wallpaper" src="" alt="Loading wallpaper...">

    <script>
        const imageUrlsFile = "pexels_photo_urls.txt"; // Path to your text file with URLs
        const changeInterval = 300000; // Change image every 5 minutes (300,000 milliseconds)
                                      // Adjust as needed: e.g., 60000 for 1 minute, 3600000 for 1 hour
        let images = [];
        let currentIndex = 0;

        // Function to shuffle an array (Fisher-Yates shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        async function fetchImageUrls() {
            try {
                const response = await fetch(imageUrlsFile);
                if (!response.ok) {
                    console.error(`Error fetching ${imageUrlsFile}: ${response.statusText}`);
                    document.getElementById("wallpaper").alt = `Error: Could not load ${imageUrlsFile}. Ensure it's in the same directory as slideshow.html.`;
                    return;
                }
                const text = await response.text();
                images = text.split("\n").filter(url => url.trim() !== ""); // Split by newline, remove empty lines
                
                if (images.length === 0) {
                    console.error("No image URLs found in the file.");
                     document.getElementById("wallpaper").alt = "Error: No image URLs found in pexels_photo_urls.txt.";
                    return;
                }
                
                shuffleArray(images); // Shuffle the images initially
                setWallpaper();
                setInterval(setWallpaper, changeInterval);
            } catch (error) {
                console.error("Failed to load or process image URLs:", error);
                document.getElementById("wallpaper").alt = "Error loading image URLs. Check console for details.";
            }
        }

        function setWallpaper() {
            if (images.length === 0) return;
            
            const wallpaperElement = document.getElementById("wallpaper");
            wallpaperElement.src = images[currentIndex];
            
            currentIndex++;
            if (currentIndex >= images.length) {
                currentIndex = 0; // Loop back to the beginning
                shuffleArray(images); // Re-shuffle when the list completes for variety
            }
        }

        // Start the slideshow
        fetchImageUrls();
    </script>
</body>
</html>
